<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Notes â€” Modern Web App</title>
<link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg-light: #f5f9fa;
    --card-light: #fff;
    --text-light: #0d1b2a;
    --muted-light: #6c757d;
    --accent: #0ea5a4;
    --accent-hover: #0b9488;
    --bg-dark: #121212;
    --card-dark: #1e1e1e;
    --text-dark: #e9ecef;
    --muted-dark: #a1a1a1;
    --radius: 14px;
    --shadow: 0 4px 20px rgba(0,0,0,0.08);
  }
  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: 'Lexend Deca', sans-serif;
    background: linear-gradient(135deg, #f5f9fa, #e6f4f1);
    color: var(--text-light);
    transition: background 0.3s, color 0.3s;
    padding-top: 70px;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    width: 100%;
  }
  body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
  }
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    background: var(--card-light);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 20px;
    box-shadow: var(--shadow);
    z-index: 1000;
    transition: background 0.3s;
  }
  body.dark nav {
    background: var(--card-dark);
  }
  nav h1 {
    font-size: 20px;
    margin: 0;
    font-weight: 700;
  }
  .nav-controls {
    display: flex;
    gap: 8px;
  }
  button {
    border: none;
    padding: 8px 12px;
    border-radius: var(--radius);
    background: var(--card-light);
    color: var(--text-light);
    cursor: pointer;
    font-weight: 600;
    transition: background 0.25s, transform 0.1s;
  }
  body.dark button {
    background: var(--card-dark);
    color: var(--text-dark);
  }
  button:hover:not(:disabled) {
    background: var(--accent);
    color: white;
    transform: translateY(-1px);
  }
  button.primary {
    background: var(--accent);
    color: white;
  }
  button.primary:hover:not(:disabled) {
    background: var(--accent-hover);
  }
  button.compact {
    padding: 6px 10px;
    font-size: 14px;
    min-width: 70px;
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
  }
  .app {
    width: 80%;
    max-width: 1400px;
    margin: 22px auto;
    padding: 20px;
    display: grid;
    grid-template-columns: 360px 1fr;
    gap: 20px;
  }
  @media (max-width: 900px) {
    .app {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      grid-template-columns: 1fr;
    }
  }
  .card {
    background: var(--card-light);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 14px;
    transition: background 0.3s;
    display: flex;
    flex-direction: column;
  }
  body.dark .card {
    background: var(--card-dark);
  }
  .sidebar {
    height: 78vh;
    display: flex;
    flex-direction: column;
  }
  .search input {
    width: 100%;
    padding: 10px;
    border-radius: var(--radius);
    border: 1px solid #d0d7de;
    font-size: 14px;
  }
  .notes-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .note-item {
    padding: 10px;
    border-radius: var(--radius);
    cursor: pointer;
    border: 1px solid transparent;
    transition: background 0.2s;
    user-select: none;
  }
  .note-item:hover {
    background: rgba(14,165,164,0.08);
  }
  .note-item.active {
    background: rgba(14,165,164,0.15);
  }
  .note-title {
    font-weight: 600;
  }
  .note-meta {
    font-size: 12px;
    color: var(--muted-light);
  }
  body.dark .note-meta {
    color: var(--muted-dark);
  }
  .editor {
    height: 78vh;
    display: flex;
    flex-direction: column;
  }
  .editor input.title {
    font-size: 18px;
    padding: 10px;
    border-radius: var(--radius);
    border: 1px solid #d0d7de;
    font-weight: 600;
    margin-bottom: 10px;
  }
  textarea {
    flex: 1;
    padding: 14px;
    border-radius: var(--radius);
    border: 1px solid #d0d7de;
    resize: none;
    font-family: inherit;
    font-size: 15px;
    margin-bottom: 10px;
  }
  .bottom {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    color: var(--muted-light);
  }
  body.dark .bottom {
    color: var(--muted-dark);
  }
  .btn-group {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }
  footer {
    text-align: center;
    padding: 12px;
    font-size: 13px;
    color: var(--muted-light);
    border-top: 1px solid rgba(0,0,0,0.05);
  }
  body.dark footer {
    color: var(--muted-dark);
    border-color: rgba(255,255,255,0.05);
  }
  @media (max-width:900px) {
    .sidebar { height: auto; order: 2; }
    .editor { height: auto; order: 1; }
  }
</style>
</head>
<body>

<nav>
  <h1>Notes</h1>
  <div class="nav-controls">
    <button class="primary" id="newBtn" type="button">New</button>
    <button id="exportBtn" type="button">Export</button>
    <button id="importBtn" type="button">Import</button>
    <button id="clearBtn" type="button">Clear</button>
    <button id="darkModeToggle" type="button">ðŸŒ“</button>
  </div>
</nav>

<div class="app">
  <div class="card sidebar">
    <div class="search">
      <input id="searchInput" placeholder="Search notes..." autocomplete="off" />
    </div>
    <div class="notes-list" id="notesList"></div>
    <div style="padding:10px;font-size:12px;color:gray;">
      LocalStorage â€¢ <span id="noteCount">0</span> notes
    </div>
  </div>

  <div class="card editor">
    <input class="title" id="noteTitle" placeholder="Note title..." autocomplete="off" />
    <textarea id="noteBody" placeholder="Write your note here..."></textarea>

    <div class="btn-group">
      <button class="primary compact" id="saveBtn" type="button" disabled>Save</button>
      <button class="compact" id="deleteBtn" type="button" disabled style="background:#ff4d4d;color:white;">Delete</button>
    </div>

    <div class="bottom">
      <span id="noteInfo">No note selected</span>
      <span id="charWordCount">0 chars, 0 words</span>
    </div>
  </div>
</div>

<footer>
  Developed by Gean Paulo from Manila
</footer>

<input type="file" id="fileInput" accept="application/json" style="display:none" />

<script>
document.addEventListener('DOMContentLoaded', () => {
  const STORAGE_KEY = 'notes_v1';
  let notes = [];
  let activeId = null;

  const notesList = document.getElementById('notesList');
  const noteTitle = document.getElementById('noteTitle');
  const noteBody = document.getElementById('noteBody');
  const noteInfo = document.getElementById('noteInfo');
  const charWordCount = document.getElementById('charWordCount');
  const searchInput = document.getElementById('searchInput');
  const exportBtn = document.getElementById('exportBtn');
  const importBtn = document.getElementById('importBtn');
  const fileInput = document.getElementById('fileInput');
  const clearBtn = document.getElementById('clearBtn');
  const deleteBtn = document.getElementById('deleteBtn');
  const saveBtn = document.getElementById('saveBtn');
  const noteCount = document.getElementById('noteCount');

  const id = () => 'n_' + Date.now();
  const now = () => new Date().toISOString();

  function load() {
    notes = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  }

  function saveAll() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
    renderList(searchInput.value);
  }

  function renderList(filter = '') {
    const q = filter.toLowerCase();
    notesList.innerHTML = '';
    notes
      .filter(n => n.title.toLowerCase().includes(q) || n.body.toLowerCase().includes(q))
      .sort((a, b) => new Date(b.updated) - new Date(a.updated))
      .forEach(n => {
        const el = document.createElement('div');
        el.className = 'note-item' + (n.id === activeId ? ' active' : '');
        el.innerHTML = `<div class="note-title">${n.title || '(Untitled)'}</div><div class="note-meta">${new Date(n.updated).toLocaleString()}</div>`;
        el.onclick = () => selectNote(n.id);
        notesList.appendChild(el);
      });
    noteCount.textContent = notes.length;
  }

  function selectNote(id) {
    const n = notes.find(x => x.id === id);
    if (!n) return;
    activeId = n.id;
    noteTitle.value = n.title;
    noteBody.value = n.body;
    noteInfo.textContent = `Last saved: ${new Date(n.updated).toLocaleString()}`;
    updateCounts();
    updateUIState();
  }

  function newNote() {
    const n = { id: id(), title: '', body: '', updated: now() };
    notes.push(n);
    saveAll();
    selectNote(n.id);
    updateUIState();
  }

  function saveActive() {
    if (!activeId) {
      alert('No note selected to save!');
      return;
    }
    const n = notes.find(x => x.id === activeId);
    if (!n) {
      alert('Active note not found!');
      return;
    }
    n.title = noteTitle.value;
    n.body = noteBody.value;
    n.updated = now();
    saveAll();
    noteInfo.textContent = `Last saved: ${new Date(n.updated).toLocaleString()}`;
    updateUIState();
  }

  function deleteActive() {
    if (!activeId) {
      alert('No note selected to delete!');
      return;
    }
    if (!confirm('Delete this note?')) return;
    notes = notes.filter(n => n.id !== activeId);
    activeId = null;
    noteTitle.value = '';
    noteBody.value = '';
    noteInfo.textContent = 'No note selected';
    saveAll();
    updateUIState();
  }

  function updateCounts() {
    const text = noteBody.value;
    const words = text.trim() ? text.trim().split(/\s+/).filter(Boolean).length : 0;
    charWordCount.textContent = `${text.length} chars, ${words} words`;
  }

  function updateUIState() {
    const enabled = activeId !== null;
    deleteBtn.disabled = !enabled;
    saveBtn.disabled = !enabled;
  }

  // Auto-create new note if none selected when user types in title or body
  noteTitle.oninput = () => {
    if (activeId === null) newNote();
    updateCounts();
  };

  noteBody.oninput = () => {
    if (activeId === null) newNote();
    updateCounts();
  };

  // Other event listeners
  saveBtn.onclick = saveActive;
  deleteBtn.onclick = deleteActive;
  document.getElementById('newBtn').onclick = newNote;
  searchInput.oninput = () => renderList(searchInput.value);

  exportBtn.onclick = () => {
    const blob = new Blob([JSON.stringify(notes, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'notes.json';
    a.click();
    URL.revokeObjectURL(url);
  };

  importBtn.onclick = () => fileInput.click();

  fileInput.onchange = e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = () => {
      try {
        const imported = JSON.parse(reader.result);
        notes = notes.concat(imported.filter(im => !notes.find(n => n.id === im.id)));
        saveAll();
      } catch {
        alert('Import failed');
      }
    };
    reader.readAsText(file);
  };

  clearBtn.onclick = () => {
    if (confirm('Clear all notes?')) {
      notes = [];
      saveAll();
      activeId = null;
      noteTitle.value = '';
      noteBody.value = '';
      noteInfo.textContent = 'No note selected';
      updateUIState();
    }
  };

  document.getElementById('darkModeToggle').onclick = () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('darkMode', document.body.classList.contains('dark'));
  };

  // Initialization
  load();
  renderList();
  if (notes.length) selectNote(notes[0].id);
  updateCounts();
  updateUIState();

  if (localStorage.getItem('darkMode') === 'true') {
    document.body.classList.add('dark');
  }
});
</script>

</body>
</html>
